<!DOCTYPE html>
<html lang="fr">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Quiz D@t@sph3re</title>
    <style>
      :root {
        --bg: #0b0c10;
        --card: #11131a;
        --muted: #9aa3b2;
        --text: #e9edf5;
        --accent: #7c5cff;
        --accent2: #2ee59d;
        --border: rgba(255, 255, 255, 0.1);
        --radius: 18px;
      }

      * {
        box-sizing: border-box;
      }

      body {
        margin: 0;
        font-family: system-ui, -apple-system, Segoe UI, Roboto, Helvetica,
          Arial;
        background: radial-gradient(
            1200px 600px at 20% 10%,
            rgba(124, 92, 255, 0.18),
            transparent 60%
          ),
          radial-gradient(
            900px 500px at 90% 30%,
            rgba(46, 229, 157, 0.14),
            transparent 55%
          ),
          var(--bg);
        color: var(--text);
        min-height: 100vh;
        display: flex;
        justify-content: center;
        padding: 24px;
      }

      .app {
        width: min(900px, 100%);
      }

      h1 {
        margin: 0;
        font-size: 28px;
      }

      .subtitle {
        color: var(--muted);
        margin: 6px 0 18px 0;
      }

      .pill {
        display: inline-block;
        padding: 6px 10px;
        margin-bottom: 22px;
        border-radius: 999px;
        border: 1px solid var(--border);
        color: var(--muted);
        font-size: 13px;
      }

      .card {
        background: linear-gradient(
          180deg,
          rgba(255, 255, 255, 0.05),
          rgba(255, 255, 255, 0.02)
        );
        border: 1px solid var(--border);
        border-radius: var(--radius);
        padding: 20px;
      }

      .progress {
        height: 8px;
        background: rgba(255, 255, 255, 0.08);
        border-radius: 999px;
        overflow: hidden;
        margin-bottom: 12px;
      }

      .bar {
        height: 100%;
        width: 0%;
        background: linear-gradient(90deg, var(--accent), var(--accent2));
        transition: width 0.3s;
      }

      .question {
        font-size: 20px;
        margin: 16px 0;
      }

      .answers {
        display: grid;
        gap: 10px;
      }

      .answer {
        border: 1px solid var(--border);
        border-radius: 14px;
        padding: 12px;
        cursor: pointer;
        background: rgba(255, 255, 255, 0.03);
      }

      .answer:hover {
        background: rgba(255, 255, 255, 0.07);
      }

      .answer.selected {
        border-color: var(--accent);
        background: rgba(124, 92, 255, 0.18);
      }

      .controls {
        display: flex;
        justify-content: space-between;
        margin-top: 16px;
      }

      button {
        background: rgba(255, 255, 255, 0.06);
        border: 1px solid var(--border);
        color: var(--text);
        padding: 10px 14px;
        border-radius: 14px;
        cursor: pointer;
      }

      button.primary {
        background: linear-gradient(90deg, var(--accent), var(--accent2));
        color: #0b0c10;
        border: none;
      }

      button:disabled {
        opacity: 0.4;
        cursor: not-allowed;
      }

      .result {
        display: none;
      }

      .badge {
        display: flex;
        align-items: center;
        gap: 12px;
        padding: 10px 14px;
        border-radius: 999px;
        border: 1px solid var(--border);
        background: rgba(255, 255, 255, 0.04);
      }

      .card-tile {
        display: flex;
        gap: 18px;
        padding: 18px;
        border-radius: 20px;
        border: 1px solid var(--border);
        background: linear-gradient(
          180deg,
          rgba(255, 255, 255, 0.06),
          rgba(255, 255, 255, 0.02)
        );
      }

      /* IMAGE */
      .card-img {
        width: 130px;
        height: 195px;
        border-radius: 14px;
        object-fit: cover;
        box-shadow: 0 14px 35px rgba(0, 0, 0, 0.45);
        border: 1px solid rgba(255, 255, 255, 0.15);
        flex-shrink: 0;
      }

      /* TEXTE */
      .card-meta {
        display: flex;
        flex-direction: column;
      }

      .card-meta .title {
        font-size: 22px;
        font-weight: 700;
      }

      .card-meta .desc {
        font-size: 14px;
        line-height: 1.5;
        color: var(--muted);
        margin-top: 8px;
      }

      /* üì± MOBILE */
      @media (max-width: 640px) {
        .card-tile {
          flex-direction: column;
          align-items: center;
          text-align: center;
        }

        .card-img {
          width: 95%;
          height: auto;
          max-height: 65vh;
        }

        .card-meta {
          width: 100%;
          margin-top: 12px;
        }
      }

      .scores {
        margin-top: 16px;
      }

      .score {
        display: flex;
        justify-content: space-between;
        font-size: 14px;
        color: var(--muted);
      }
    </style>
  </head>

  <body>
    <div class="app">
      <h1>Quiz D@t@sph3re - 18 D√©cembre</h1>
      <div class="subtitle">
        D√©couvre quelles cartes du Tarot te repr√©sentent le mieux.
      </div>
      <div class="pill">12 questions ¬∑ ~5 min</div>

      <div class="card">
        <div class="progress">
          <div class="bar" id="bar"></div>
        </div>

        <div id="quiz">
          <div class="question" id="question"></div>
          <div class="answers" id="answers"></div>
          <div class="controls">
            <button id="prev">Retour</button>
            <button id="next" class="primary" disabled>Suivant</button>
          </div>
        </div>

        <div id="result" class="result">
          <h2>Ton r√©sultat</h2>
          <div id="resultRoles"></div>
          <div id="resultDyns" style="margin-top: 10px"></div>

          <h3 style="margin-top: 20px">R√©partition des r√¥les</h3>
          <div id="histogram"></div>

          <h3 style="margin-top: 40px">R√©partition des dynamiques</h3>
          <div id="dynHistogram"></div>

          <div class="controls" style="margin-top: 20px">
            <button onclick="location.reload()">Recommencer</button>
          </div>

          <div class="controls" style="margin-top: 12px">
            <button id="toggleVision">
              üîÆ Vision ‚Äî explorer tous les r√¥les & dynamiques
            </button>
          </div>

          <div id="visionSection" style="display: none; margin-top: 30px">
            <h2>Vision globale</h2>

            <h3 style="margin-top: 20px">Tous les r√¥les</h3>
            <div id="visionRoles" style="display: grid; gap: 16px"></div>

            <h3 style="margin-top: 30px">Toutes les dynamiques</h3>
            <div id="visionDyns" style="display: grid; gap: 16px"></div>
          </div>
        </div>
      </div>
    </div>

    <script>
      const roleDescriptions = {
        Bateleur: {
          title: 'Le Bateleur ‚Äî L‚ÄôInitiateur',
          description: `Tu incarnes l‚Äô√©nergie du commencement.
Tu es √† l‚Äôaise lorsque rien n‚Äôest encore fig√©, quand il faut explorer, tester et mettre les choses en mouvement.
Tu pr√©f√®res l‚Äôaction imparfaite √† l‚Äôattente prolong√©e et tu sais d√©bloquer des situations en osant essayer.

Dans un groupe, tu joues souvent le r√¥le de d√©clencheur : celui qui lance une dynamique, ouvre une piste ou fait √©merger une solution inattendue.`,
        },

        Papesse: {
          title: 'La Papesse ‚Äî L‚ÄôObservatrice',
          description: `Tu avances par compr√©hension plus que par pr√©cipitation.
Tu observes, analyses et prends le temps de saisir les enjeux profonds avant d‚Äôagir.
L√† o√π d‚Äôautres r√©agissent, tu r√©fl√©chis.

Dans un collectif, tu apportes de la clart√©, du discernement et une capacit√© rare √† lire entre les lignes.`,
        },

        Imp√©ratrice: {
          title: 'L‚ÄôImp√©ratrice ‚Äî La Cr√©atrice',
          description: `Tu donnes forme aux id√©es et fais √©merger du nouveau.
Cr√©atif¬∑ve, expressif¬∑ve et intuitif¬∑ve, tu sais transformer une intention abstraite en quelque chose de vivant et partageable.

Dans un groupe, tu insuffles de l‚Äô√©lan, de l‚Äôenvie et une capacit√© √† imaginer autrement.`,
        },

        Empereur: {
          title: 'L‚ÄôEmpereur ‚Äî Le Structurant',
          description: `Tu apportes cadre, stabilit√© et s√©curit√©.
Quand la situation devient floue ou chaotique, tu sais poser des r√®gles, d√©finir des priorit√©s et construire quelque chose de solide.

Dans une √©quipe, tu es souvent un point d‚Äôancrage sur lequel les autres peuvent s‚Äôappuyer.`,
        },

        Amoureux: {
          title: 'L‚ÄôAmoureux ‚Äî Le M√©diateur',
          description: `Tu es attentif¬∑ve aux relations et aux √©quilibres humains.
Tu cherches l‚Äôharmonie, la coop√©ration et la justesse dans les choix collectifs.

Dans un groupe, tu facilites les √©changes et aides chacun √† trouver sa place sans s‚Äôeffacer.`,
        },

        Chariot: {
          title: 'Le Chariot ‚Äî Le Moteur',
          description: `Tu incarnes la volont√© et la progression.
Orient√©¬∑e vers l‚Äôobjectif, tu sais transformer l‚Äôintention en action et maintenir une direction claire malgr√© les obstacles.

Dans une √©quipe, tu fais avancer, tu mobilises et tu donnes l‚Äôimpulsion n√©cessaire pour atteindre le but.`,
        },

        Hermite: {
          title: 'L‚ÄôHermite ‚Äî Le Sage',
          description: `Tu avances avec recul et profondeur.
Tu prends de la distance pour comprendre le sens, le timing et les cons√©quences √† long terme.

Dans un collectif, tu apportes une vision pos√©e, une sagesse discr√®te et un regard strat√©gique.`,
        },

        Soleil: {
          title: 'Le Soleil ‚Äî Le F√©d√©rateur',
          description: `Tu rayonnes par ta pr√©sence et ton √©nergie.
Tu rassembles, motives et cr√©es un climat de confiance et d‚Äôenthousiasme.

Dans un groupe, tu renforces la coh√©sion et rappelles pourquoi avancer ensemble a du sens.`,
        },
      };

      const dynDescriptions = {
        Fou: {
          title: 'Le Fou ‚Äî L‚Äô√âlan',
          description: `Tu incarnes la spontan√©it√© et l‚Äôintuition.
Tu avances sans tout ma√Ætriser, mais avec confiance dans le mouvement.
Tu sais saisir l‚Äôinstant et oser l√† o√π d‚Äôautres h√©sitent.`,
        },
        Force: {
          title: 'La Force ‚Äî La Ma√Ætrise',
          description: `Tu progresses avec calme et constance.
M√™me sous pression, tu gardes le contr√¥le et avances sans brusquer.
Ta force r√©side dans ta stabilit√© int√©rieure.`,
        },
        Roue: {
          title: 'La Roue ‚Äî L‚ÄôAdaptation',
          description: `Tu sais t‚Äôadapter aux cycles et aux changements.
Tu profites des opportunit√©s quand elles se pr√©sentent et ajustes ton rythme.
Ton intelligence est celle du timing.`,
        },
        Temp√©rance: {
          title: 'La Temp√©rance ‚Äî L‚Äô√âquilibre',
          description: `Tu recherches l‚Äôharmonie et la fluidit√©.
Tu relies, temp√®res et facilites les √©changes.
Tu es le liant discret qui maintient l‚Äô√©quilibre du groupe.`,
        },
      };
      const roles = [
        'Bateleur',
        'Papesse',
        'Imp√©ratrice',
        'Empereur',
        'Amoureux',
        'Chariot',
        'Hermite',
        'Soleil',
      ];

      // URLs des images des r√¥les (√† remplacer)
      const roleImages = {
        Bateleur: './assets/images/1.jpg',
        Papesse: './assets/images/2.jpg',
        Imp√©ratrice: './assets/images/3.jpg',
        Empereur: './assets/images/4.jpg',
        Amoureux: './assets/images/6.jpg',
        Chariot: './assets/images/7.jpg',
        Hermite: './assets/images/9.jpg',
        Soleil: './assets/images/19.jpg',
      };
      const dyns = ['Fou', 'Force', 'Roue', 'Temp√©rance'];

      // URLs des images des dynamiques (√† remplacer)
      const dynImages = {
        Fou: './assets/images/22.jpg',
        Force: './assets/images/11.jpg',
        Roue: './assets/images/10.jpg',
        Temp√©rance: './assets/images/14.jpg',
      };

      const questions = [
        {
          q: 'Un projet d√©marre sans cadre clair. Tu pr√©f√®res‚Ä¶',
          a: [
            {
              t: 'Tester vite quelque chose',
              r: { Bateleur: 2, Imp√©ratrice: 1 },
              d: { Fou: 1 },
            },
            {
              t: 'Poser un minimum de r√®gles',
              r: { Empereur: 2, Papesse: 1 },
              d: { Force: 1 },
            },
            {
              t: 'Comprendre le fond du probl√®me',
              r: { Papesse: 2, Hermite: 1 },
              d: { Temp√©rance: 1 },
            },
            {
              t: 'Aligner les personnes',
              r: { Amoureux: 2, Soleil: 1 },
              d: { Temp√©rance: 1 },
            },
          ],
        },
        {
          q: 'Dans un groupe que tu connais peu, tu es plut√¥t‚Ä¶',
          a: [
            {
              t: 'Celui qui brise la glace',
              r: { Soleil: 2, Amoureux: 1 },
              d: { Fou: 1 },
            },
            {
              t: 'Celui qui observe',
              r: { Papesse: 2, Hermite: 1 },
              d: { Temp√©rance: 1 },
            },
            {
              t: 'Celui qui propose une activit√©',
              r: { Imp√©ratrice: 2, Bateleur: 1 },
              d: { Fou: 1 },
            },
            {
              t: 'Celui qui s‚Äôadapte au groupe',
              r: { Amoureux: 2, Soleil: 1 },
              d: { Roue: 2 },
            },
          ],
        },
        {
          q: 'En cas de d√©saccord l√©ger entre proches, tu‚Ä¶',
          a: [
            {
              t: 'Cherches un terrain d‚Äôentente',
              r: { Amoureux: 2 },
              d: { Temp√©rance: 1 },
            },
            {
              t: 'Recentres calmement',
              r: { Empereur: 2, Papesse: 1 },
              d: { Force: 1 },
            },
            {
              t: 'Prends du recul',
              r: { Hermite: 2, Papesse: 1 },
              d: { Temp√©rance: 1 },
            },
            {
              t: 'D√©tends avec humour',
              r: { Soleil: 2, Imp√©ratrice: 1 },
              d: { Fou: 1 },
            },
          ],
        },
        {
          q: 'Lors d‚Äôun voyage improvis√©, tu es plut√¥t‚Ä¶',
          a: [
            {
              t: 'Force de proposition',
              r: { Bateleur: 2, Imp√©ratrice: 1 },
              d: { Fou: 1 },
            },
            {
              t: 'Garant du minimum d‚Äôorganisation',
              r: { Empereur: 2, Papesse: 1 },
              d: { Force: 1 },
            },
            {
              t: 'Tr√®s adaptable',
              r: { Amoureux: 2, Soleil: 1 },
              d: { Roue: 2 },
            },
            {
              t: 'Observateur tranquille',
              r: { Hermite: 2, Papesse: 1 },
              d: { Temp√©rance: 1 },
            },
          ],
        },
        {
          q: 'Dans un jeu ou une activit√© ludique, tu es plut√¥t‚Ä¶',
          a: [
            { t: 'Cr√©atif', r: { Imp√©ratrice: 2, Bateleur: 1 }, d: { Fou: 1 } },
            { t: 'Comp√©titif', r: { Chariot: 2, Soleil: 1 }, d: { Force: 1 } },
            {
              t: 'Analytique',
              r: { Papesse: 2, Hermite: 1 },
              d: { Temp√©rance: 1 },
            },
            { t: 'Facilitateur', r: { Amoureux: 2 }, d: { Temp√©rance: 1 } },
          ],
        },
        {
          q: 'Lors d‚Äôun moment informel, tu es souvent‚Ä¶',
          a: [
            {
              t: 'Celui qui lance les discussions',
              r: { Soleil: 2, Amoureux: 1 },
              d: { Fou: 1 },
            },
            {
              t: 'Celui qui √©coute',
              r: { Papesse: 2, Hermite: 1 },
              d: { Temp√©rance: 1 },
            },
            { t: 'Celui qui structure', r: { Empereur: 2 }, d: { Force: 1 } },
            {
              t: 'Celui qui rebondit',
              r: { Bateleur: 2, Imp√©ratrice: 1 },
              d: { Roue: 2 },
            },
          ],
        },
        {
          q: 'Quand un groupe h√©site longtemps, tu‚Ä¶',
          a: [
            {
              t: 'Tranches pour d√©bloquer',
              r: { Empereur: 2, Chariot: 1 },
              d: { Force: 1 },
            },
            {
              t: 'Proposes une id√©e originale',
              r: { Imp√©ratrice: 2, Bateleur: 1 },
              d: { Fou: 1 },
            },
            {
              t: 'T‚Äôadaptes √† la d√©cision',
              r: { Amoureux: 2, Soleil: 1 },
              d: { Roue: 2 },
            },
            {
              t: 'Restes en retrait',
              r: { Hermite: 2, Papesse: 1 },
              d: { Temp√©rance: 1 },
            },
          ],
        },
        {
          q: 'Dans une discussion anim√©e, tu es plut√¥t‚Ä¶',
          a: [
            { t: 'Relanceur d‚Äô√©nergie', r: { Soleil: 2 }, d: { Fou: 1 } },
            {
              t: 'Synth√©tiseur',
              r: { Papesse: 2, Hermite: 1 },
              d: { Temp√©rance: 1 },
            },
            {
              t: 'Orienteur vers une conclusion',
              r: { Empereur: 2 },
              d: { Force: 1 },
            },
            {
              t: 'Rebondisseur',
              r: { Bateleur: 2, Imp√©ratrice: 1 },
              d: { Roue: 2 },
            },
          ],
        },
        {
          q: 'Un impr√©vu change les plans. Tu‚Ä¶',
          a: [
            {
              t: 'Improvises autre chose',
              r: { Bateleur: 2, Imp√©ratrice: 1 },
              d: { Fou: 1 },
            },
            {
              t: 'Acceptes et t‚Äôadaptes',
              r: { Amoureux: 2, Soleil: 1 },
              d: { Roue: 2 },
            },
            { t: 'Gardes ton calme', r: { Empereur: 2 }, d: { Force: 1 } },
            {
              t: 'Prends du recul',
              r: { Hermite: 2, Papesse: 1 },
              d: { Temp√©rance: 1 },
            },
          ],
        },
        {
          q: 'Face √† une organisation complexe, tu‚Ä¶',
          a: [
            {
              t: 'Structures pour s√©curiser',
              r: { Empereur: 2, Papesse: 1 },
              d: { Force: 1 },
            },
            {
              t: 'Simplifies par la cr√©ativit√©',
              r: { Imp√©ratrice: 2, Bateleur: 1 },
              d: { Fou: 1 },
            },
            {
              t: 'Facilites la coordination',
              r: { Amoureux: 2, Soleil: 1 },
              d: { Temp√©rance: 1 },
            },
            {
              t: 'Prends de la hauteur',
              r: { Hermite: 2, Papesse: 1 },
              d: { Temp√©rance: 1 },
            },
          ],
        },
        {
          q: 'Sur un projet collectif long, tu es‚Ä¶',
          a: [
            {
              t: 'Source d‚Äôid√©es',
              r: { Bateleur: 2, Imp√©ratrice: 1 },
              d: { Fou: 1 },
            },
            { t: 'Gardien du planning', r: { Empereur: 2 }, d: { Force: 1 } },
            {
              t: 'Tr√®s adaptable',
              r: { Amoureux: 2, Soleil: 1 },
              d: { Roue: 2 },
            },
            {
              t: 'Observateur analytique',
              r: { Papesse: 2, Hermite: 1 },
              d: { Temp√©rance: 1 },
            },
          ],
        },
        {
          q: 'Face √† une t√¢che collective exigeante, tu‚Ä¶',
          a: [
            {
              t: 'Pousses √† finir',
              r: { Chariot: 2, Soleil: 1 },
              d: { Force: 1 },
            },
            {
              t: 'Clarifies ce qu‚Äôil faut faire',
              r: { Empereur: 2, Papesse: 1 },
              d: { Force: 1 },
            },
            {
              t: 'Soutiens l‚Äô√©quilibre du groupe',
              r: { Amoureux: 2, Soleil: 1 },
              d: { Temp√©rance: 1 },
            },
            {
              t: 'Apportes une vision globale',
              r: { Hermite: 2, Papesse: 1 },
              d: { Temp√©rance: 1 },
            },
          ],
        },
      ];

      function renderCard({ img, title, description }) {
        return `
  <div class="card-tile">
      <img class="card-img" src="${img}" alt="${title}">
      <div class="card-meta">
        <div class="title">${title}</div>
        <div class="desc">${description}</div>
      </div>
    </div>
  `;
      }

      function renderVision() {
        const vr = document.getElementById('visionRoles');
        const vd = document.getElementById('visionDyns');

        vr.innerHTML = '';
        vd.innerHTML = '';

        // Tous les r√¥les
        roles.forEach((r) => {
          vr.innerHTML += renderCard({
            img: roleImages[r],
            title: roleDescriptions[r].title,
            description: roleDescriptions[r].description,
          });
        });

        // Toutes les dynamiques
        dyns.forEach((d) => {
          vd.innerHTML += renderCard({
            img: dynImages[d],
            title: dynDescriptions[d].title,
            description: dynDescriptions[d].description,
          });
        });
      }

      let i = 0;
      let answers = Array(questions.length).fill(null);

      function render() {
        document.getElementById('bar').style.width =
          (i / questions.length) * 100 + '%';
        document.getElementById('question').textContent = questions[i].q;
        const a = document.getElementById('answers');
        a.innerHTML = '';
        questions[i].a.forEach((opt, idx) => {
          const d = document.createElement('div');
          d.className = 'answer' + (answers[i] === idx ? ' selected' : '');
          d.textContent = opt.t;
          d.onclick = () => {
            answers[i] = idx;
            document.getElementById('next').disabled = false;
            render();
          };
          a.appendChild(d);
        });
        document.getElementById('prev').disabled = i === 0;
        document.getElementById('next').disabled = answers[i] === null;
      }

      function compute() {
        const rScore = {},
          dScore = {};
        roles.forEach((r) => (rScore[r] = 0));
        dyns.forEach((d) => (dScore[d] = 0));
        answers.forEach((ans, qi) => {
          const opt = questions[qi].a[ans];
          for (const r in opt.r) {
            rScore[r] += opt.r[r];
          }
          for (const d in opt.d) {
            dScore[d] += opt.d[d];
          }
        });
        return { rScore, dScore };
      }

      function showResult() {
        const { rScore, dScore } = compute();
        document.getElementById('bar').style.width = 100 + '%';
        const maxRole = Math.max(...Object.values(rScore));
        const topRoles = Object.entries(rScore)
          .filter(([_, v]) => v === maxRole)
          .map(([k]) => k);

        const maxDyn = Math.max(...Object.values(dScore));
        const topDyns = Object.entries(dScore)
          .filter(([_, v]) => v === maxDyn)
          .map(([k]) => k);

        document.getElementById('quiz').style.display = 'none';
        document.getElementById('result').style.display = 'block';

        // Affichage r√¥les
        const rDiv = document.getElementById('resultRoles');
        rDiv.innerHTML = '<h3>R√¥le(s) dominant(s)</h3>';

        topRoles.forEach((r) => {
          rDiv.innerHTML += `
    <div class="card-tile" style="margin-top:16px">
      <img class="card-img" src="${roleImages[r]}" alt="${r}">
      <div class="card-meta">
        <div class="title">${roleDescriptions[r].title}</div>
        <div class="desc">${roleDescriptions[r].description}</div>
      </div>
    </div>
  `;
        });

        // Affichage dynamiques
        const dDiv = document.getElementById('resultDyns');
        dDiv.innerHTML = '<h3>Dynamique(s)</h3>';

        topDyns.forEach((d) => {
          dDiv.innerHTML += `
<div class="card-tile" style="margin-top:16px">
<img class="card-img" src="${dynImages[d]}" alt="${d}">
<div class="card-meta">
<div class="title">${dynDescriptions[d].title}</div>
<div class="desc">${dynDescriptions[d].description}</div>
</div>
</div>
`;
        });

        // Histogramme des r√¥les
        const h = document.getElementById('histogram');
        h.innerHTML = '';
        const max = Math.max(...Object.values(rScore));
        Object.entries(rScore).forEach(([role, val]) => {
          const pct = Math.round((val / max) * 100);
          h.innerHTML += `
      <div style="margin:6px 0">
        <div style="font-size:13px;color:var(--muted)">${role} (${val})</div>
        <div style="height:8px;background:rgba(255,255,255,.08);border-radius:999px;overflow:hidden">
          <div style="width:${pct}%;height:100%;background:linear-gradient(90deg,var(--accent),var(--accent2))"></div>
        </div>
      </div>`;
        });

        const dh = document.getElementById('dynHistogram');
        const maxD = Math.max(...Object.values(dScore));

        Object.entries(dScore).forEach(([dyn, val]) => {
          const pct = Math.round((val / maxD) * 100);
          dh.innerHTML += `
    <div style="margin:6px 0">
      <div style="font-size:13px;color:var(--muted)">${dyn} (${val})</div>
      <div style="height:8px;background:rgba(255,255,255,.08);border-radius:999px;overflow:hidden">
        <div style="width:${pct}%;height:100%;background:linear-gradient(90deg,var(--accent),var(--accent2))"></div>
      </div>
    </div>`;
        });
      }

      render();

      document.getElementById('next').onclick = () => {
        if (i < questions.length - 1) {
          i++;
          render();
        } else showResult();
      };

      document.getElementById('prev').onclick = () => {
        i--;
        render();
      };

      document.getElementById('toggleVision').onclick = () => {
        const section = document.getElementById('visionSection');
        const isVisible = section.style.display === 'block';

        section.style.display = isVisible ? 'none' : 'block';

        if (!isVisible) {
          renderVision();
          section.scrollIntoView({ behavior: 'smooth' });
        }
      };
    </script>
  </body>
</html>
